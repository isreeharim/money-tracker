<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1">
Â  <meta name="theme-color" content="#1f3cff">


Â  <title><%= project.name %></title>


Â  <link rel="stylesheet" href="/style.css">
Â  <link rel="manifest" href="/manifest.json">
</head>
<body>


<div class="container">


Â  <!-- HEADER WITH BACK + DARK MODE -->
Â  <div class="header" style="display:flex;align-items:center;gap:10px;">
Â  Â  
Â  Â  <!-- BACK TO HOME -->
Â  Â  <a href="/" 
Â  Â  Â  Â style="text-decoration:none;font-size:18px;">â¬…</a>


Â  Â  <!-- PROJECT TITLE -->
Â  Â  <span style="flex:1;"><%= project.name %></span>


Â  Â  <!-- DARK MODE TOGGLE -->
Â  Â  <button id="themeToggle">ðŸŒ™</button>
Â  </div>


Â  <!-- SUMMARY -->
Â  <div class="card summary">
Â  Â  <div class="received">
Â  Â  Â  â‚¹ <%= totalReceived %><br>
Â  Â  Â  <small>Received</small>
Â  Â  </div>
Â  Â  <div class="spent">
Â  Â  Â  â‚¹ <%= totalSpent %><br>
Â  Â  Â  <small>Spent</small>
Â  Â  </div>
Â  Â  <div class="balance">
Â  Â  Â  â‚¹ <%= balance %><br>
Â  Â  Â  <small>Balance</small>
Â  Â  </div>
Â  </div>


Â  <!-- ADD TRANSACTION -->
Â  <div class="card">
Â  Â  <form method="POST" action="/projects/<%= project._id %>/transactions">
Â  Â  Â  <select name="type">
Â  Â  Â  Â  <option value="RECEIVED">Money Received</option>
Â  Â  Â  Â  <option value="SPENT">Money Spent</option>
Â  Â  Â  </select>


Â  Â  Â  <input type="number" name="amount" placeholder="Amount" required>
Â  Â  Â  <input name="person" placeholder="From / To">
Â  Â  Â  <input name="purpose" placeholder="Purpose">
Â  Â  Â  <button>Add Entry</button>
Â  Â  </form>
Â  </div>


Â  <!-- TRANSACTIONS -->
Â  <div class="card">
Â  Â  <% transactions.forEach(t => { %>
Â  Â  Â  <div class="tx <%= t.type === 'RECEIVED' ? 'received' : 'spent' %>">
Â  Â  Â  Â  <div class="tx-type">
Â  Â  Â  Â  Â  <%= t.type %> â€“ â‚¹ <%= t.amount %>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <small>
Â  Â  Â  Â  Â  <%= t.person || "â€”" %> Â· <%= t.purpose || "â€”" %><br>
Â  Â  Â  Â  Â  <%= t.date.toDateString() %>
Â  Â  Â  Â  </small>


Â  Â  Â  Â  <form method="POST" action="/transactions/<%= t._id %>/delete">
Â  Â  Â  Â  Â  <button class="danger">Delete</button>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>
Â  Â  <% }) %>
Â  </div>


</div>


<!-- DARK MODE SCRIPT -->
<script>
Â  const toggleBtn = document.getElementById("themeToggle");


Â  function setTheme(theme) {
Â  Â  document.body.classList.toggle("dark", theme === "dark");
Â  Â  localStorage.setItem("theme", theme);
Â  Â  toggleBtn.textContent = theme === "dark" ? "â˜€ï¸" : "ðŸŒ™";
Â  }


Â  toggleBtn.addEventListener("click", () => {
Â  Â  const isDark = document.body.classList.contains("dark");
Â  Â  setTheme(isDark ? "light" : "dark");
Â  });


Â  const savedTheme = localStorage.getItem("theme");
Â  if (savedTheme) {
Â  Â  setTheme(savedTheme);
Â  } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
Â  Â  setTheme("dark");
Â  }


Â  if ("serviceWorker" in navigator) {
Â  Â  navigator.serviceWorker.register("/service-worker.js");
Â  }
</script>


</body>
</html>