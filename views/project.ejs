<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= project.name %></title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <a href="/">←</a>
    <div class="header-title"><%= project.name %></div>
  </div>

  <!-- MAIN BALANCE -->
  <div class="balance-card">
    <div class="balance-label">Project Balance</div>
    <div class="balance-value">₹ <%= balance %></div>

    <div class="stats">
      <div class="stat-box">
        <div class="stat-value">₹ <%= totalReceived %></div>
        <div class="stat-label">Received</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">₹ <%= totalSpent %></div>
        <div class="stat-label">Spent</div>
      </div>
    </div>
  </div>

  <!-- ADD TRANSACTION -->
  <div class="section">
    <form method="POST" action="/projects/<%= project._id %>/transactions">
      <select name="type">
        <option value="RECEIVED">Received</option>
        <option value="SPENT">Spent</option>
      </select>

      <input type="number" name="amount" placeholder="Amount" required>
      <input name="person" placeholder="From / To">
      <input name="purpose" placeholder="Purpose">

      <button class="primary">Add Transaction</button>
    </form>
  </div>

  <!-- TRANSACTIONS -->
  <div class="section">
    <% if (transactions.length === 0) { %>
      <div class="tx-meta">No transactions yet</div>
    <% } %>

    <% transactions.forEach(t => { %>
      <div class="tx">
        <div class="tx-title"><%= t.type %> – ₹ <%= t.amount %></div>
        <div class="tx-meta">
          <%= t.person || "—" %> · <%= t.purpose || "—" %><br>
          <%= t.date.toDateString() %>
        </div>

        <form method="POST" action="/transactions/<%= t._id %>/delete">
          <button class="danger">Delete</button>
        </form>
      </div>
    <% }) %>
  </div>

</div>

</body>
</html>
